<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <!-- –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–π –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ß–∞—Ç</title>
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –≤–∞—à–∏ —Å—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="/css/chats.css">
    <link rel="stylesheet" href="/css/chats_mobile.css">
    <link rel="stylesheet" href="/css/profile.css">
    <link rel="stylesheet" href="/css/my-profile.css">
    <link rel="stylesheet" href="/css/photoViewer.css">
</head>
<body>

<!-- –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
<div class="container">
    <!-- –í–µ—Ä—Ö–Ω—è—è —à–∞–ø–∫–∞ —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º –∏ –∫–Ω–æ–ø–∫–∞–º–∏ -->
    <header class="main-header">
        <div class="header-buttons left">
            <button id="findUserBtn" class="header-action-btn find-user-btn">–ù–∞–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</button>
        </div>

        <div class="user-info-header">
            <h3 id="username"></h3>
            <button id="myProfileBtn" class="my-profile-btn" title="–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å">
                <img id="headerAvatarImg" src="/images/profile-default.png" alt="–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å">
            </button>
        </div>
        <div class="header-buttons right">
            <button id="logoutBtn" class="header-action-btn logout-btn">–í—ã–π—Ç–∏</button>
        </div>
    </header>

    <!-- –≠–ª–µ–º–µ–Ω—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ó–∞–≥—Ä—É–∑–∫–∞...") -->
    <div id="status" class="status"></div>

    <!-- –û—Å–Ω–æ–≤–Ω–∞—è —Ä–∞–±–æ—á–∞—è –æ–±–ª–∞—Å—Ç—å, —Å–æ–¥–µ—Ä–∂–∞—â–∞—è —Å–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ –∏ –æ–∫–Ω–æ —á–∞—Ç–∞ -->
    <main class="chat-wrapper">

        <!-- 1. –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ (—Å–ª–µ–≤–∞ –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–µ) -->
        <ul id="chatList" class="chat-list">
            <!-- –°—é–¥–∞ JavaScript –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã <li> –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —á–∞—Ç–∞ -->
        </ul>

        <!-- 2. –û–∫–Ω–æ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —á–∞—Ç–∞ (—Å–ø—Ä–∞–≤–∞ –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–µ, —Å–∫—Ä—ã—Ç–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) -->
        <section id="chatWindow" class="chat-window hidden">

            <!-- –®–∞–ø–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —á–∞—Ç–∞ -->
            <div class="chat-window__header">
                <button class="back-btn" id="backToListBtn">&larr;</button>
                <h2 id="chatTitle">–í—ã–±–µ—Ä–∏—Ç–µ —á–∞—Ç</h2>
                <div>
                    <button id="profileBtn" class="attachments-btn">üë§</button>
                    <button class="close-btn" id="closeChatBtn">&times;</button>
                </div>
            </div>

            <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π -->
            <div id="messages" class="messages">
                <p class="placeholder">–ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π...</p>
            </div>

            <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ø—Ä–µ–≤—å—é –≤–ª–æ–∂–µ–Ω–∏–π –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π -->
            <div id="attachmentPreviewContainer" class="attachment-preview-container"></div>

            <!-- –§–æ—Ä–º–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è -->
            <form id="messageForm" class="message-form">
                <!-- –°–∫—Ä—ã—Ç—ã–π input –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–æ–≤ -->
                <input type="file" id="fileInput" hidden multiple>
                <!-- –ö–Ω–æ–ø–∫–∞-—Å–∫—Ä–µ–ø–∫–∞ –¥–ª—è –≤—ã–∑–æ–≤–∞ input'–∞ -->
                <button type="button" id="attachFileBtn" class="attach-btn">üìé</button>
                <!-- –ü–æ–ª–µ –¥–ª—è –≤–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏—è -->
                <textarea id="messageInput" class="message-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..."
                          rows="1"></textarea>
                <!-- –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ -->
                <button type="submit" class="send-btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            </form>

        </section> <!-- –ö–æ–Ω–µ—Ü .chat-window -->
    </main> <!-- –ö–æ–Ω–µ—Ü .chat-wrapper -->
</div> <!-- –ö–æ–Ω–µ—Ü .container -->

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
<div id="userSearchModal" class="modal hidden">
    <div class="modal-content">
        <div class="modal-header">
            <h2>–ù–∞–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h2>
            <button id="closeModalBtn" class="close-btn">&times;</button>
        </div>
        <div id="userListContainer" class="user-list-container">
            <!-- –°—é–¥–∞ JavaScript –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
        </div>
    </div>
</div>

<div id="userProfileModal" class="modal hidden">
    <div class="modal-content my-profile-modal-content">
        <div class="modal-header">
            <h2 id="userProfileModalTitle">–ü—Ä–æ—Ñ–∏–ª—å</h2>
            <button id="closeUserProfileBtn" class="close-btn">&times;</button>
        </div>
        <div id="userProfileContent" class="modal-body user-profile-body">

        </div>
    </div>
</div>

<div id="myProfileModal" class="modal hidden">
    <div class="modal-content my-profile-modal-content">
        <div class="modal-header">
            <h2>–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h2>
            <button id="closeMyProfileBtn" class="close-btn">&times;</button>
        </div>
        <div id="myProfileContent" class="modal-body my-profile-body">
            <!-- –°—é–¥–∞ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –∫–æ–Ω—Ç–µ–Ω—Ç –ø—Ä–æ—Ñ–∏–ª—è -->
            <div class="skeleton-list">
                <div class="skeleton skeleton-row" style="height: 80px;"></div>
                <div class="skeleton skeleton-row"></div>
                <div class="skeleton skeleton-row"></div>
            </div>
        </div>
        <div class="modal-footer">
            <button id="saveMyProfileBtn" class="profile-save-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            <button id="cancelMyProfileBtn" class="profile-cancel-btn">–û—Ç–º–µ–Ω–∞</button>
        </div>
    </div>
</div>

<!-- –û–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—Å—Ç–∞–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π -->
<div id="editUserModal" class="modal hidden">
    <div class="modal-content edit-user-modal-content">
        <div class="modal-header">
            <h2>–ò–∑–º–µ–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</h2>
            <button id="closeEditUserBtn" class="close-btn">&times;</button>
        </div>
        <form id="editUserForm" novalidate>
            <div class="modal-body">
                <div class="profile-form-group">
                    <label for="editNameInput">–ò–º—è:</label>
                    <input type="text" id="editNameInput" required>
                </div>
                <div class="profile-form-group">
                    <label for="editSurnameInput">–§–∞–º–∏–ª–∏—è:</label>
                    <input type="text" id="editSurnameInput">
                </div>
                <div class="profile-form-group">
                    <label for="editUsernameInput">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</label>
                    <input type="text" id="editUsernameInput" required>
                </div>
                <div id="editUserError" class="error-message hidden"></div>
            </div>
            <div class="modal-footer">
                <button type="submit" id="saveEditUserBtn" class="profile-save-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button type="button" id="cancelEditUserBtn" class="profile-cancel-btn">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </form>
    </div>
</div>


<script src="/js/lib/sockjs.min.js"></script>
<script src="/js/lib/stomp.min.js"></script>
<script src="/js/apiClient.js"></script> <!-- –ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è apiFetch -->
<script src="/js/chats.js"></script>
<script src="/js/current-profile.js"></script>
<script src="/js/photoViewer.js"></script>
<script src="/js/imageLoader.js"></script>
<script src="/js/userProfile.js"></script>


</body>
</html>